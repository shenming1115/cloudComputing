<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SocialApp</title>
    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="../css/ai-chat.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="container">
            <a href="index.html" class="nav-brand">SocialApp</a>
            
            <div class="nav-links">
                <a href="index.html" class="nav-item active">Home</a>
                <a href="search.html" class="nav-item">Explore</a>
                <a href="profile.html" class="nav-item" id="navProfileLink" style="display: none;">Profile</a>
            </div>

            <!-- Guest Nav -->
            <div id="navGuest" style="display: none; gap: var(--spacing-md); align-items: center;">
                <a href="login.html" class="btn btn-secondary" style="font-size: 15px; padding: 10px 20px; font-weight: 600;">Login</a>
                <a href="login.html" class="btn btn-primary" style="font-size: 15px; padding: 10px 20px; font-weight: 600;">Sign Up</a>
            </div>

            <!-- User Nav -->
            <div id="navUser" style="display: none; gap: var(--spacing-md); align-items: center;">
                <button class="btn btn-primary" onclick="openCreatePostModal()" style="font-size: 15px; padding: 10px 20px; font-weight: 600;">New Post</button>
                <div class="user-avatar" id="navUserAvatar" style="width: 36px; height: 36px; font-size: 16px;">U</div>
                <button class="btn btn-secondary" onclick="logout()" style="font-size: 15px; padding: 10px 20px; font-weight: 600; background: transparent;">Logout</button>
            </div>
        </div>
    </nav>

    <!-- Hero Section (Guest Only) -->
    <div id="heroSection" class="hero-section" style="display: none;">
        <h1 class="hero-title">Connect.<br>Share.<br>Inspire.</h1>
        <p class="hero-subtitle">A minimalist community designed for clarity and connection.</p>
        <div style="display: flex; gap: var(--spacing-md); justify-content: center;">
            <a href="login.html" class="btn btn-primary" style="padding: 12px 24px; font-size: 17px;">Get Started</a>
            <a href="#postsFeed" class="btn btn-secondary" style="padding: 12px 24px; font-size: 17px;">Learn more</a>
        </div>
    </div>

    <!-- Main Layout -->
    <div class="main-layout">
        <!-- Main Feed -->
        <main class="feed-container">
            <!-- Create Post Widget -->
            <div class="create-post-card" onclick="openCreatePostModal()">
                <div class="user-avatar">U</div>
                <div class="create-post-input">What's on your mind?</div>
            </div>

            <!-- Posts Feed -->
            <div id="postsFeed">
                <!-- Posts will be injected here by JS -->
                <div class="text-center" style="padding: 60px; color: var(--text-secondary);">
                    Loading posts...
                </div>
            </div>
        </main>
    </div>

    <!-- Create Post Modal -->
    <div id="createPostModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255,255,255,0.8); backdrop-filter: blur(10px); z-index: 2000; align-items: center; justify-content: center;">
        <div class="card" style="width: 100%; max-width: 600px; box-shadow: 0 20px 40px rgba(0,0,0,0.1);">
            <div style="display: flex; justify-content: space-between; margin-bottom: var(--spacing-lg); align-items: center;">
                <h3 style="font-size: 24px;">Create Post</h3>
                <button onclick="closeCreatePostModal()" style="background: none; font-size: 24px; color: var(--text-secondary);">&times;</button>
            </div>
            <textarea id="postContent" placeholder="What's on your mind?" style="width: 100%; height: 200px; padding: var(--spacing-md); border: none; background: var(--bg-color); border-radius: var(--radius-md); resize: none; margin-bottom: var(--spacing-lg); font-family: inherit; font-size: 18px;"></textarea>
            
            <!-- Media Upload Section -->
            <div style="margin-bottom: var(--spacing-lg);">
                <label style="display: block; margin-bottom: var(--spacing-sm); font-weight: 500; font-size: 14px; color: var(--text-secondary);">Add Media</label>
                <div style="display: flex; gap: var(--spacing-md);">
                    <button class="btn btn-secondary" onclick="document.getElementById('imageInput').click()">
                        ðŸ“· Photo
                    </button>
                    <button class="btn btn-secondary" onclick="document.getElementById('videoInput').click()">
                        ðŸŽ¥ Video
                    </button>
                    <button class="btn btn-secondary" onclick="document.getElementById('reelInput').click()">
                        ðŸŽ¬ Reel
                    </button>
                    <!-- AI Boost Button -->
                    <button class="btn btn-ai-boost" onclick="openAIBoostModal()" title="Get AI-powered content suggestions">
                        âœ¨ AI Boost
                    </button>
                </div>
                <input type="file" id="imageInput" accept="image/*" style="display: none" onchange="handleFileSelect(this, 'image')">
                <input type="file" id="videoInput" accept="video/*" style="display: none" onchange="handleFileSelect(this, 'video')">
                <input type="file" id="reelInput" accept="video/*" style="display: none" onchange="handleFileSelect(this, 'reel')">
                <div id="selectedFileName" style="margin-top: var(--spacing-sm); font-size: 13px; color: var(--text-secondary);"></div>
            </div>

            <div style="display: flex; justify-content: flex-end;">
                <button class="btn btn-primary" onclick="submitPost()" style="padding: 12px 32px; font-size: 16px;">Post</button>
            </div>
        </div>
    </div>

    <!-- AI Boost Modal -->
    <div id="aiBoostModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255,255,255,0.9); backdrop-filter: blur(10px); z-index: 2100; align-items: center; justify-content: center;">
        <div class="card" style="width: 100%; max-width: 600px; box-shadow: 0 20px 40px rgba(0,0,0,0.15);">
            <div style="display: flex; justify-content: space-between; margin-bottom: var(--spacing-lg); align-items: center;">
                <h3 style="font-size: 24px;">âœ¨ AI Content Boost</h3>
                <button onclick="closeAIBoostModal()" style="background: none; font-size: 24px; color: var(--text-secondary);">&times;</button>
            </div>
            
            <p style="color: var(--text-secondary); margin-bottom: var(--spacing-lg);">
                Get AI-powered content suggestions to make your post more engaging!
            </p>

            <div style="margin-bottom: var(--spacing-lg);">
                <label style="display: block; margin-bottom: var(--spacing-sm); font-weight: 500;">Topic or idea:</label>
                <input type="text" id="aiTopicInput" placeholder="e.g., travel, technology, cooking..." 
                    style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: var(--radius-md); font-size: 16px;">
            </div>

            <div id="aiSuggestions" style="display: none; background: var(--bg-color); padding: var(--spacing-lg); border-radius: var(--radius-md); margin-bottom: var(--spacing-lg); min-height: 150px;">
                <h4 style="margin-bottom: var(--spacing-md); font-size: 16px;">AI Suggestions:</h4>
                <div id="aiSuggestionsContent" style="color: var(--text-secondary); line-height: 1.6; white-space: pre-wrap;"></div>
            </div>

            <div style="display: flex; gap: var(--spacing-md); justify-content: flex-end;">
                <button class="btn btn-secondary" onclick="closeAIBoostModal()">Cancel</button>
                <button id="getAISuggestionsBtn" class="btn btn-primary" onclick="getAISuggestions()">Get Suggestions</button>
                <button id="useAISuggestionBtn" class="btn btn-primary" onclick="useAISuggestion()" style="display: none;">Use This</button>
            </div>
        </div>
    </div>

    <!-- Security Utils -->
    <script src="../js/utils.js"></script>
    <script src="../js/ai-integration.js"></script>
    <script src="../js/ai-chat.js"></script>
    <script src="../js/index-new.js"></script>
</body>
</html>
