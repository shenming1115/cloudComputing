# 🧪 运行测试

## ⚠️ 重要提示
应用当前**未运行**。请先启动应用再运行测试。

## 🚀 启动应用
```powershell
.\start-app.ps1
```
等待30-60秒直到看到 "Started Application" 消息。

---

## 📝 测试凭证

### 管理员账号（已在代码中配置）
```
用户名: admin123
密码: pxTUxZPBBmgk3XD
```
来源：`src/main/java/com/cloudapp/socialforum/config/AdminUserInitializer.java`

### 测试用户（脚本会自动注册）
```
用户名: testuser
密码: Test123456!
```

---

## 🧪 测试脚本

### 1️⃣ 管理员功能测试（推荐先运行）
```powershell
.\test-admin.ps1
```

**测试内容：**
- ✅ 健康检查
- ✅ 管理员登录
- ✅ 用户管理 (GET /api/admin/users)
- ✅ 帖子管理 (GET /api/admin/posts)
- ✅ 评论管理 (GET /api/admin/comments) ⭐ 新增
- ✅ 系统统计 (GET /api/admin/stats)
- ✅ S3文件管理 (GET /api/admin/s3/files)

---

### 2️⃣ AI助手测试（重点）
```powershell
.\test-ai.ps1
```

**测试内容：**
- 自动注册/登录测试用户
- 发送多个测试问题给AI
- 验证AI回复质量
- 检查响应时间

**测试问题：**
1. "你好，请简单介绍一下你自己"
2. "你能做什么？"
3. "什么是Spring Boot？"
4. "给我讲个笑话"

---

### 3️⃣ 完整API测试
```powershell
.\test-api.ps1
```

**测试内容：**
- 用户注册/登录
- 创建帖子
- 点赞/取消点赞
- 评论功能
- 分享功能
- AI助手
- 搜索功能
- 删除功能

---

## ✅ 预期结果

### test-admin.ps1
```
========================================
  管理员功能测试
========================================

1. 测试健康检查...
   OK - 应用正在运行
   
2. 管理员登录...
   OK - 登录成功
   
3. 获取用户列表...
   OK - 找到 X 个用户
   
4. 获取帖子列表...
   OK - 找到 X 个帖子
   
5. 获取评论列表...
   OK - 找到 X 个评论
   
6. 获取系统统计...
   OK - 系统统计:
   - 用户: X
   - 帖子: X
   - 评论: X
   
7. 获取S3文件列表...
   OK - 找到 X 个S3文件
```

### test-ai.ps1
```
========================================
  AI助手测试
========================================

问题: 你好，请简单介绍一下你自己
AI回复:
[AI的回复内容]

...

========================================
成功: 4 / 4
失败: 0 / 4
========================================
```

---

## 🐛 故障排除

### 应用未运行
```
ERROR - 应用未运行，请先启动应用
运行: .\start-app.ps1
```
**解决方案：** 启动应用并等待完全启动

### 管理员登录失败
```
ERROR - 登录失败
```
**检查：**
1. 密码是否正确：`pxTUxZPBBmgk3XD`
2. 应用是否完全启动
3. 数据库连接是否正常

### AI助手无响应
```
ERROR - 无回复
```
**检查：**
1. Gemini API密钥是否配置
2. 网络是否可以访问Google API
3. API配额是否充足

### S3文件获取失败
```
ERROR - 获取S3文件失败
```
**检查：**
1. AWS凭证是否配置
2. S3 bucket是否存在
3. 权限是否正确

---

## 📊 验证清单

完成所有测试后，确认：

- [ ] 应用可以正常启动
- [ ] 管理员可以登录
- [ ] 用户管理功能正常
- [ ] 帖子管理功能正常
- [ ] 评论管理功能正常 ⭐ 新增
- [ ] 系统统计显示正确
- [ ] S3存储可以访问
- [ ] AI助手可以正常对话 ⭐ 重点
- [ ] 所有API端点响应正确

---

## 🎨 界面改进

已完成的改进：
- ✅ 删除彩虹横幅
- ✅ 优化配色方案（更易读）
- ✅ 改进表格样式

访问管理面板：
```
http://localhost:8080/html/admin-dashboard.html
```

---

## 📝 下一步

测试通过后：
1. 访问管理面板验证界面改进
2. 测试前端功能
3. 进行压力测试（可选）
4. 准备部署到生产环境

---

**提示：** 所有测试脚本都会显示详细的输出，包括成功/失败状态和错误信息。
